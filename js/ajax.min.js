function ajaxloadPageInit(a){jQuery(a+"a").click(function(a){if(1==ajaxcheck_ignore(this.href,this)){a.preventDefault(),document.title="Loading...",this.blur();this.title||this.name||"",this.rel||!1;try{ajaxclick_code(this)}catch(e){}ajaxloadPage(this.href)}bodyChangeColor()}),jQuery("."+ajaxsearch_class).each(function(a){jQuery(this).attr("action")&&(ajaxsearchPath=jQuery(this).attr("action"),jQuery(this).submit(function(){return submitSearch(jQuery(this).serialize()),!1}))}),jQuery("."+ajaxsearch_class).attr("action")}function ajaxloadPage(a,e,t){if(!ajaxisLoad){1==ajaxscroll_top&&jQuery("html,body").animate({scrollTop:0},1500),ajaxisLoad=!0,ajaxstarted=!0;var n=a.replace("http://","").replace("https://",""),o=n.indexOf("/"),r=a.indexOf(n),d=a.substring(r+o);if(1!=e&&"function"==typeof window.history.pushState){var c={foo:1e3+1001*Math.random()};history.pushState(c,"ajax page loaded...",d)}jQuery("body").append(ajaxloading_code),jQuery("#"+ajaxcontent).fadeTo("slow",.4,function(){jQuery("#"+ajaxcontent).fadeIn("slow",function(){jQuery.ajax({type:"GET",url:a,data:t,cache:!1,dataType:"html",success:function(e){ajaxisLoad=!1;var n=e.split("</title>",2);if(n.length>=2){e=n[1];var o=n[0].split("<title>")[1];jQuery(document).attr("title",jQuery("<div/>").html(o).text())}if(1==ajaxtrack_analytics&&"undefined"!=typeof _gaq&&(t="undefined"==typeof t?"":"?"+t,_gaq.push(["_trackPageview",d+t])),e=e.split('id="'+ajaxcontent+'"')[1],!e)return void(location.href=a);e=e.substring(e.indexOf(">")+1);for(var r=1,c="";r>0;){for(temp=e.split("</div>")[0],i=0,pos=temp.indexOf("<div");-1!=pos;)i++,pos=temp.indexOf("<div",pos+1);r=r+i-1,c=c+e.split("</div>")[0]+"</div>",e=e.substring(e.indexOf("</div>")+6)}document.getElementById(ajaxcontent).innerHTML=c,jQuery("#"+ajaxcontent).css("position","absolute"),jQuery("#"+ajaxcontent).css("left","20000px"),jQuery("#"+ajaxcontent).show(),ajaxloadPageInit("#"+ajaxcontent+" "),1==ajaxreloadDocumentReady&&jQuery(document).trigger("ready");try{ajaxreload_code()}catch(s){}jQuery("#"+ajaxcontent).hide(),jQuery("#"+ajaxcontent).css("position",""),jQuery("#"+ajaxcontent).css("left",""),jQuery("#"+ajaxcontent).fadeTo("slow",1,function(){}),jQuery(".spinner").remove()},error:function(a,e,t){ajaxisLoad=!1,document.title="Loading...",document.getElementById(ajaxcontent).innerHTML=ajaxloading_error_code,document.location.reload()}})})})}}function submitSearch(a){ajaxisLoad||ajaxloadPage(ajaxsearchPath,0,a)}function ajaxcheck_ignore(a,e){if(0!==location.href.indexOf(ajax.home))return!1;if(0!==e.href.indexOf(ajax.home)&&0!==e.href.indexOf("/"))return!1;if("_blank"===e.target)return!1;for(var t in ajaxignore)if(a.indexOf(ajaxignore[t])>=0)return!1;return!0}function ajaxreload_code(){jQuery("article.full-width").length?jQuery("#container").addClass("full-width"):jQuery("#container").removeClass("full-width"),"function"==typeof text_autospace_init&&window.text_autospace_init(),window.initgallary(),"function"==typeof initSlim&&window.initSlim(),window.favorite_link_init(),window.refresh_qrimg(),window.add_views()}function ajaxclick_code(a){jQuery("ul.nav li").each(function(){jQuery(this).removeClass("current-menu-item")}),jQuery(a).parents("li").addClass("current-menu-item")}var ajaxcontent="content",ajaxsearch_class="searchform",ajaxignore_string=new String("#, /wp-, .pdf, .zip, .rar, /share"),ajaxignore=ajaxignore_string.split(", "),ajaxtrack_analytics=!1,ajaxscroll_top=!0,ajaxloading_code='<div class="spinner"></div>',ajaxloading_error_code='<div class="box"><p style="padding:20px;">页面加载中......</p></div>',ajaxreloadDocumentReady=!1,ajaxisLoad=!1,ajaxstarted=!1,ajaxsearchPath=null,ajaxua=jQuery.browser;jQuery(document).ready(function(){ajaxloadPageInit("")}),window.onpopstate=function(a){ajaxstarted===!0&&1==ajaxcheck_ignore(document.location.toString())&&ajaxloadPage(document.location.toString(),1)};var bodyChangeColor=function(){},body_width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(body_width>650){var rndColor=200;bodyChangeColor=function(){rndColor+=60+Math.floor(241*Math.random()),rndColor>=360&&(rndColor-=360),document.body.style.backgroundColor="hsl("+rndColor+",20%,70%)"},bodyChangeColor()}